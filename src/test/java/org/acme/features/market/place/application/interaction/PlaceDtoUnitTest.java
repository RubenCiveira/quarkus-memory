package org.acme.features.market.place.application.interaction;

import org.acme.features.market.place.domain.model.Place;
import org.acme.features.market.place.domain.model.valueobject.PlaceMerchantVO;
import org.acme.features.market.place.domain.model.valueobject.PlaceNameVO;
import org.acme.features.market.place.domain.model.valueobject.PlaceOpeningDateVO;
import org.acme.features.market.place.domain.model.valueobject.PlacePhotoVO;
import org.acme.features.market.place.domain.model.valueobject.PlaceUidVO;
import org.acme.features.market.place.domain.model.valueobject.PlaceVersionVO;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

class PlaceDtoUnitTest {

  /**
   * @autogenerated ValueObjectGenerator
   */
  @Test
  @DisplayName("Test a entity reference contruction")
  void test_place_dto_builder() {
    Place entity = Place.builder().uid(PlaceUidVO.from("one")).name(PlaceNameVO.from("one"))
        .merchant(PlaceMerchantVO.from(null)).photo(PlacePhotoVO.from(null))
        .openingDate(PlaceOpeningDateVO.from(null)).version(PlaceVersionVO.from(1)).build();
    Place fixRef = Place.builder().uid(PlaceUidVO.from("two")).name(PlaceNameVO.from("two"))
        .merchant(PlaceMerchantVO.from(null)).photo(PlacePhotoVO.from(null))
        .openingDate(PlaceOpeningDateVO.from(null)).version(PlaceVersionVO.from(2)).build();
    Place other;
    PlaceDto dto = PlaceDto.from(entity);
    Assertions.assertEquals("one", dto.getUid());
    Assertions.assertEquals("one", dto.getName());
    Assertions.assertEquals(null, dto.getMerchant());
    Assertions.assertEquals(null, dto.getPhoto());
    Assertions.assertEquals(null, dto.getOpeningDate());
    Assertions.assertEquals(1, dto.getVersion());
    other = dto.toEntityBuilder().build();
    dto.hide("-");
    dto.fix("-", fixRef);
    Assertions.assertEquals("one", other.getUid().getValue());
    Assertions.assertEquals("one", other.getName().getValue());
    Assertions.assertEquals(null, other.getMerchant().getValue());
    Assertions.assertEquals(null, other.getPhoto().getValue().orElse(null));
    Assertions.assertEquals(null, other.getOpeningDate().getValue().orElse(null));
    Assertions.assertEquals(1, other.getVersion().getValue().orElse(null));
    dto.fix("uid", fixRef);
    dto.fix("name", fixRef);
    dto.fix("merchant", fixRef);
    dto.fix("photo", fixRef);
    dto.fix("openingDate", fixRef);
    dto.fix("version", fixRef);
    other = dto.toEntityBuilder().build();
    Assertions.assertEquals("two", other.getUid().getValue());
    Assertions.assertEquals("two", other.getName().getValue());
    Assertions.assertEquals(null, other.getMerchant().getValue());
    Assertions.assertEquals(null, other.getPhoto().getValue().orElse(null));
    Assertions.assertEquals(null, other.getOpeningDate().getValue().orElse(null));
    Assertions.assertEquals(2, other.getVersion().getValue().orElse(null));
    dto.hide("uid");
    dto.hide("name");
    dto.hide("merchant");
    dto.hide("photo");
    dto.hide("openingDate");
    dto.hide("version");
    Assertions.assertNull(dto.getUid());
    Assertions.assertNull(dto.getName());
    Assertions.assertNull(dto.getMerchant());
    Assertions.assertNull(dto.getPhoto());
    Assertions.assertNull(dto.getOpeningDate());
    Assertions.assertNull(dto.getVersion());
    dto = PlaceDto.from(entity);
    Assertions.assertEquals("one", dto.getUid());
    Assertions.assertEquals("one", dto.getName());
    Assertions.assertEquals(null, dto.getMerchant());
    Assertions.assertEquals(null, dto.getPhoto());
    Assertions.assertEquals(null, dto.getOpeningDate());
    Assertions.assertEquals(1, dto.getVersion());
    dto.fix("uid");
    dto.fix("name");
    dto.fix("merchant");
    dto.fix("photo");
    dto.fix("openingDate");
    dto.fix("version");
    Assertions.assertNull(dto.getUid());
    Assertions.assertNull(dto.getName());
    Assertions.assertNull(dto.getMerchant());
    Assertions.assertNull(dto.getPhoto());
    Assertions.assertNull(dto.getOpeningDate());
    Assertions.assertNull(dto.getVersion());
  }
}
