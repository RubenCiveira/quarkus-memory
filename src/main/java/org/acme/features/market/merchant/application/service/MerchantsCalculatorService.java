package org.acme.features.market.merchant.application.service;

import org.acme.common.action.Interaction;
import org.acme.features.market.merchant.application.MerchantDto;
import org.acme.features.market.merchant.application.service.proposal.MerchantCalculatedProposal;
import org.acme.features.market.merchant.domain.model.Merchant;

import jakarta.enterprise.context.RequestScoped;
import jakarta.enterprise.event.Event;
import lombok.RequiredArgsConstructor;

@RequestScoped
@RequiredArgsConstructor
public class MerchantsCalculatorService {

  /**
   * Event source for maniputale the visible list
   *
   * @autogenerated CalculatorServiceGenerator
   */
  private final Event<MerchantCalculatedProposal> formulaBuilder;

  /**
   * The input entity with the copy values without hidden
   *
   * @autogenerated CalculatorServiceGenerator
   * @param prev The source interaction
   * @param source The source interaction
   * @param original The source interaction
   * @return The input entity with the copy values without hidden
   */
  public MerchantDto copyWithFormulas(Interaction prev, MerchantDto source, Merchant original) {
    MerchantCalculatedProposal formulas = MerchantCalculatedProposal.builder().dto(source)
        .original(original).interaction(prev).build();
    formulaBuilder.fire(formulas);
    return formulas.getDto();
  }

  /**
   * The input entity with the copy values without hidden
   *
   * @autogenerated CalculatorServiceGenerator
   * @param prev The source interaction
   * @param source The source interaction
   * @return The input entity with the copy values without hidden
   */
  public MerchantDto copyWithFormulas(Interaction prev, MerchantDto source) {
    MerchantCalculatedProposal formulas =
        MerchantCalculatedProposal.builder().dto(source).interaction(prev).build();
    formulaBuilder.fire(formulas);
    return formulas.getDto();
  }
}
